---
title: äº†è§£å’Œå¼€å‘ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶
date: '2024-10-21'
tags: ['browser', 'chrome', 'extension']
draft: false
summary: è®¤è¯†ä»€ä¹ˆæ˜¯æµè§ˆå™¨æ’ä»¶ä»¥åŠå¦‚ä½•å¼€å‘ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼Œå®ç°å„ç§åŠŸèƒ½...
---

å¦‚æœæ‚¨è¿˜æœªä½¿ç”¨è¿‡æµè§ˆå™¨æ’ä»¶ï¼Œå¯ä»¥æ‰“å¼€ [Chrome æµè§ˆå™¨æ’ä»¶å•†åº—](https://chromewebstore.google.com/category/extensions) çœ‹çœ‹

![Chrome æµè§ˆå™¨æ’ä»¶å•†åº—](/static/images/mdx/extension/store.png)

å’Œä»¥å¾€æ‰€è§åˆ°çš„æ’ä»¶ç³»ç»Ÿçš„å®šä¹‰ç›¸åŒï¼Œæµè§ˆå™¨æ’ä»¶ä¹Ÿæ˜¯ç”¨æ¥å¢å¼ºæµè§ˆå™¨çš„åŠŸèƒ½ï¼Œæ­£å¦‚ä¸Šå›¾ä¸­çš„å‰¯æ ‡é¢˜ï¼šâ€œè®©æµè§ˆå™¨å¦‚è™æ·»ç¿¼â€

è€Œæ ¹æ®å…·ä½“éœ€è¦å¯ä»¥é€‰æ‹©ä¸åŒçš„æ’ä»¶å¢å¼ºä¸åŒåŠŸèƒ½ï¼ŒåŒæ ·è§ä¸Šå›¾ä¸‹åŠéƒ¨åˆ†çš„â€œçƒ­é—¨åˆ†ç±»â€

ä¸å¦¨é€‰æ‹©ä¸‹è½½è¯•ç”¨ä¸‹å‡ ä¸ªæ’ä»¶ï¼ˆä»…ä¸¾ä¾‹ï¼Œå¯è‡ªç”±é€‰æ‹©è¯•ç”¨ï¼‰

1. [DeepLï¼šäººå·¥æ™ºèƒ½ç¿»è¯‘å™¨å’Œå†™ä½œåŠ©æ‰‹](https://chromewebstore.google.com/detail/deepl%EF%BC%9A%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%BF%BB%E8%AF%91%E5%99%A8%E5%92%8C%E5%86%99%E4%BD%9C%E5%8A%A9%E6%89%8B/cofdbpoegempjloogbagkncekinflcnj) åˆ’è¯ç¿»è¯‘ï¼Œæ— éœ€å†å¤åˆ¶åˆ°ç¿»è¯‘è½¯ä»¶ä¸­ç²˜è´´æŸ¥çœ‹è¯‘æ–‡
2. [Popup my Bookmarks](https://chromewebstore.google.com/detail/popup-my-bookmarks/mppflflkbbafeopeoeigkbbdjdbeifni) ä¹¦ç­¾ç®¡ç†ï¼Œä¸ªäººä¹ æƒ¯ä¸å±•ç¤ºæµè§ˆå™¨ä¹¦ç­¾æ ï¼Œç‚¹å‡»æ’ä»¶å›¾æ ‡å³å±•å¼€ä¹¦ç­¾
3. [Text Blaze: Templates and Snippets](https://chromewebstore.google.com/detail/text-blaze-templates-and/idgadaccgipmpannjkmfddolnnhmeklj) è¾“å…¥æ¡†è¡¥å…¨ï¼Œå¯ä»¥é¢„è®¾å¸¸ç”¨ç‰‡æ®µï¼Œæ¯”å¦‚é‚®ä»¶ã€è´¦å·ã€å¯†ç ç­‰ï¼Œæµè§ˆå™¨ä¸­çš„è¾“å…¥åœºæ™¯å°±å¯ä»¥ä¸€é”®è¡¥å…¨

è¿˜æœ‰å„ç§åœºæ™¯å¯ä»¥è§£é”ï¼Œç†Ÿç»ƒä½¿ç”¨å„ç§æ’ä»¶ç»å¯¹å¯ä»¥æå‡ä½ çš„å·¥ä½œå­¦ä¹ æ•ˆç‡

## æ’ä»¶éƒ½å¯ä»¥åšä»€ä¹ˆ

1. å¢å¼º Tab é¡µï¼Œæ–°å¢æˆ–åˆ é™¤å†…å®¹ï¼Œæ¯”å¦‚ [DeepL](https://chromewebstore.google.com/detail/deepl%EF%BC%9A%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%BF%BB%E8%AF%91%E5%99%A8%E5%92%8C%E5%86%99%E4%BD%9C%E5%8A%A9%E6%89%8B/cofdbpoegempjloogbagkncekinflcnj) å¯ä»¥åˆ’è¯å°±åœ°ç¿»è¯‘å±•ç¤ºï¼Œå¼¹å‡ºçª—å£å¹¶ä¸æ˜¯å½“å‰è®¿é—®é¡µé¢æ‰€æ„å»ºçš„ï¼Œè€Œæ˜¯ç”±æ’ä»¶åˆ›å»ºå¹¶æ’å…¥è¿›å½“å‰é¡µé¢çš„
2. å¢å¼ºè®¾ç½®æ“ä½œæŒ‰é’®ï¼Œæ¯ä¸ªæ’ä»¶éƒ½ä¼šå±•ç¤ºåœ¨å³ä¸Šéƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥è®¾ç½®å…¶æ”¶èµ·æˆ–å±•å¼€å±•ç¤ºæ’ä»¶å›¾æ ‡ï¼Œç‚¹å‡»å›¾æ ‡æ—¶ä¼šå±•ç¤ºæ’ä»¶æä¾›çš„ popup å¼¹å‡ºçª—å£ï¼Œæ¯”å¦‚ [å¤©æ°” - Weather](https://chromewebstore.google.com/detail/%E5%A4%A9%E6%B0%94-weather/ibieofighcnndjcjchdahdiacjpmkhgf) ç›´æ¥å›¾æ ‡å±•ç¤ºä»Šæ—¥å¤©æ°”ï¼Œç‚¹å‡»å±•å¼€å¼¹å‡ºçª—å£æŸ¥çœ‹æ›´å¤šä¿¡æ¯
3. å¢å¼ºå³é”®å·¥å…·æ ï¼Œè®¿é—®ä»»ä½•é¡µé¢éƒ½å¯ä»¥å³é”®æ“ä½œæµè§ˆå™¨ï¼Œå¯ä»¥åœ¨æ­¤æ–°å¢å¿«æ·æ“ä½œ
4. å¢å¼ºæ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œå¯ä»¥æ›¿æ¢æµè§ˆå™¨æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œè‡ªå®šä¹‰ä»»ä½•å†…å®¹ï¼Œæ¯”å¦‚ [Clear New Tab](https://chromewebstore.google.com/detail/clear-new-tab/felphkbfjadmcejnibcmcncimlappdde) å¯ä»¥æ›¿æ¢é»˜è®¤æ–°æ ‡ç­¾é¡µï¼Œæ›¿æ¢ä¸ºä¸€ä¸ªç®€æ´çš„ç©ºç™½é¡µ
5. å¢å¼ºå¼€å‘è€…å·¥å…·ï¼Œæ¯”å¦‚ [Redux DevTools](https://chromewebstore.google.com/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd) å¯ä»¥æŸ¥çœ‹ Redux çŠ¶æ€æ ‘

## å¦‚ä½•å¼€å‘[^1]

[^1]: [Chrome Extensions](https://developer.chrome.com/docs/extensions)

é¦–å…ˆä¸€ä¸ªæ’ä»¶ç›®å½•åŒ…æ‹¬ [manifest.json](https://developer.chrome.com/docs/extensions/reference/manifest) é…ç½®æ–‡ä»¶ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€å°æ¸…å•å†…å®¹ï¼š

```json:manifest.json
{
  "manifest_version": 3,
  "name": "Extension Name",
  "description": "Extension Description",
  "version": "1.0.0"
}
```

### popup å¼¹å‡ºçª—å£

åœ¨ manifest.json æ–°å¢ action é…ç½®ï¼Œå¹¶åœ¨æ’ä»¶ç›®å½•ä¸­æä¾› popup.htmlï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•å¸¸è§„çš„ HTML é¡µé¢

```json:manifest.json
{
  "action": {
    "default_popup": "popup.html"
  }
}
```

åœ¨ç‚¹å‡»å›¾æ ‡æ—¶å³å¯å¼¹å‡ºçª—å£å±•ç¤º popup.html å†…å®¹

![popup.html](/static/images/mdx/extension/popup.png)

### Service Worker åå°è„šæœ¬

è¯•æƒ³ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘è¿›å…¥äº†ä¸€ä¸ªé˜…è¯»ç½‘ç«™ï¼Œä½†æˆ‘åªæƒ³åœ¨å½“å‰é¡µé¢é˜…è¯» 15 åˆ†é’Ÿï¼Œä¸æƒ³åœ¨æ­¤è€—è´¹å¤ªå¤šæ—¶é—´ï¼Œæˆ‘ç‚¹å¼€å³ä¸Šè§’çš„å®šæ—¶å™¨æ’ä»¶ï¼Œå¸Œæœ›åœ¨æ­¤é¡µé¢é˜…è¯»åœç•™ 15 åˆ†é’Ÿåé—¹é“ƒæç¤ºæˆ‘ã€‚
æ³¨æ„ä¸æ˜¯å®šæ—¶ 15 åˆ†é’Ÿï¼Œè€Œæ˜¯åœ¨å½“å‰é¡µé¢é˜…è¯»æ»¡ 15 åˆ†é’Ÿï¼Œä¸ç„¶ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨é—¹é’Ÿå‘¢ï¼ŸğŸ¤£

è¿™ç§åœºæ™¯ä¸‹æˆ‘ä»¬è€ƒè™‘ä¸‹å¦‚ä½•å®ç°ï¼Ÿé¦–å…ˆæ˜¯æ•´ä¸ªåº”ç”¨æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼ˆå…¶ä»–éƒ¨åˆ†ä¸‹æ–‡å†ç»§ç»­è¡¥å……ï¼‰ï¼šå®šæ—¶å™¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ popup ä¸­å®ç°å¹¶ç»´æŠ¤å®šæ—¶å™¨ï¼Œä¸€æ—¦å…³é—­ popupï¼Œä¿å­˜åœ¨å†…å­˜ä¸­çš„å®šæ—¶å™¨ä¹Ÿä¼šéšç€ç¨‹åºçš„å…³é—­è€Œé”€æ¯ï¼Œé‡æ–°æ‰“å¼€æ—¶åˆæ˜¯ä¸€ä¸ªåˆå§‹åŒ–æµç¨‹ã€‚

è¿™æ—¶å°±éœ€è¦å€ŸåŠ©ä¸€ä¸ªå¯ä»¥æŒç»­è¿è¡Œçš„åå°è„šæœ¬ï¼Œå’Œ Web åº”ç”¨ä¸€æ ·ï¼Œæ’ä»¶ä¹Ÿæ”¯æŒæ³¨å†Œ Service Worker åå°è„šæœ¬

```json:manifest.json
{
  "background": {
    "service_worker": "sw.js"
  }
}
```

åœ¨ç›®å½•ä¸­æ–°å»º sw.js å¹¶å†™å…¥å†…å®¹

```js:sw.js
console.log("Service Worker Script")
setInterval(function () {
  console.log("log from service worker every 3s")
}, 3000)
```

ç„¶åæ‰“å¼€æ’ä»¶ç®¡ç†é¡µé¢ï¼Œç‚¹å‡»åˆ·æ–°é‡è½½æ’ä»¶ï¼Œå°±å¯ä»¥çœ‹åˆ° â€œæ£€æŸ¥è§†å›¾ Service Workerâ€

![åŠ è½½ sw.js](/static/images/mdx/extension/sw-load.png)

ç‚¹å‡»ä¼šæ–°çª—å£æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå°±å¯ä»¥çœ‹åˆ° Service Worker è„šæœ¬çš„æ‰§è¡Œæ—¥å¿—ï¼Œ`setInterval` å¯ä»¥æ­£å¸¸æŒç»­æ‰§è¡Œ

![æŸ¥çœ‹ sw.js console ä¿¡æ¯](/static/images/mdx/extension/sw-console.png)

#### å¦‚ä½•é€šä¿¡

ç„¶åä¸‹ä¸€ä¸ªéœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯å¦‚ä½•é€šä¿¡ï¼Ÿ

chrome æä¾›äº†ä¸¤ä¸ª API æ¥å®ç°å„ä¸ªé¡µé¢ä¹‹é—´çš„é€šä¿¡ï¼š`chrome.runtime.sendMessage` å’Œ `chrome.runtime.onMessage`

```js:sw.js
console.log("Service Worker Script")

chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {
  console.log(request)
  sendResponse({
    msg: "hello from service worker"
  })
})
```

```js:popup.html
<script>
setTimeout(function () {
  chrome.runtime.sendMessage({
    from: "popup",
    message: "hello from popup"
  })
}, 3000)
</script>
```

## ä½¿ç”¨å¼€å‘æ¡†æ¶ç®€åŒ–å¼€å‘æµç¨‹

### plasmo

https://www.plasmo.com/

### wxt

https://wxt.dev/
